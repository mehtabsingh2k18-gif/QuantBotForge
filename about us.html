<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Why Traders Trust QuantBotForge</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
/* ========== GLOBAL ========== */
:root{
  --accent:#4e8cff;
  --accent2:#38bdf8;
  --muted:#94a3b8;
  --bg:#0b0f19;
  --card:#111828;
}
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:"Poppins",Arial,sans-serif;background:linear-gradient(135deg,#0c0f1a,#1b2236);color:#fff;overflow-x:hidden;}

/* NAVBAR */
.navbar{position:fixed;top:0;left:0;right:0;display:flex;justify-content:space-between;align-items:center;padding:18px 36px;z-index:999;transition:all .28s ease}
.navbar-inner{display:flex;align-items:center;gap:28px}
.logo{font-weight:800;font-size:22px;color:var(--accent)}
.nav-links{display:flex;gap:20px;align-items:center}
.nav-links a{text-decoration:none;color:#e6eefb;font-weight:600;transition:color .2s}
.nav-links a:hover{color:var(--accent)}
.nav-cta{background:var(--accent);color:#fff;padding:10px 16px;border-radius:10px;text-decoration:none;font-weight:700}
.navbar.scrolled{background:rgba(11,15,25,0.88);backdrop-filter:blur(8px)}
.hamburger{display:none;cursor:pointer;gap:6px;flex-direction:column}
.hamburger div{width:26px;height:3px;background:#fff;border-radius:3px}
.mobile-menu{position:fixed;top:0;right:-100%;width:72%;height:100%;background:#0f1724;padding:70px 20px;transition:right .28s ease;z-index:998}
.mobile-menu.active{right:0}
.mobile-menu a{display:block;color:#fff;padding:14px 0;text-decoration:none;font-weight:600}

@media(max-width:980px){
  .result-wrap{grid-template-columns:1fr}
  .card-grid{grid-template-columns:1fr}
  .nav-links{display:none}
  .hamburger{display:flex}
}
@media(max-width:520px){
  .hero h1{font-size:30px}
  .hero p{font-size:15px}
  .section{padding:80px 14px}
}
.nav-btn{
  padding:8px 16px;border-radius:10px;font-weight:700;
  cursor:pointer;text-decoration:none;font-size:14px;
  transition:0.2s;
}
.nav-btn.login{border:1px solid var(--accent);color:var(--accent);background:transparent;}
.nav-btn.login:hover{background:rgba(78,140,255,0.1);}
.nav-btn.signup{background:var(--accent);color:white;}
.nav-btn.signup:hover{transform:scale(1.05);}

/* Hamburger Menu */
.hamburger {
  display: none;
  flex-direction: column;
  cursor: pointer;
  gap: 5px;
  margin-left:10px;
}
.hamburger div {
  width: 25px;
  height: 3px;
  background-color: white;
  transition: all 0.3s ease;
  border-radius:2px;
}
.navbar-mobile {
  display: none;
  flex-direction: column;
  gap: 10px;
  position: absolute;
  top: 70px;
  right: 16px;
  background: rgba(11,15,25,0.98);
  padding: 14px;
  border-radius: 12px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.5);
  z-index: 999;
  min-width: 200px;
}
.navbar-mobile a {
  color: #e2e8f0;
  font-size: 16px;
  padding: 8px 6px;
  text-decoration:none;
  display:block;
}
.navbar-mobile.show {display: flex;}

/* Upgrade popup */
#upgradePopup{
  display:none;position:fixed;bottom:100px;right:26px;width:260px;
  padding:18px;background:#fff;color:#000;border-radius:12px;
  font-size:15px;box-shadow:0 20px 40px rgba(0,0,0,0.25);z-index:999;
  opacity:0; transition:0.3s ease;
}
#upgradePopup.show {
  display:block;
  opacity:1;
}
.whatsapp-float {
  position: fixed;
  bottom: 20px;
  left: 20px;
  width: 60px;
  height: 60px;
  z-index: 9999;
  background-color: #25d366;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
  box-shadow: 0 4px 10px rgba(0,0,0,0.3);
  transition: transform 0.2s, box-shadow 0.2s;
}

.whatsapp-float:hover {
  transform: scale(1.1);
  box-shadow: 0 6px 14px rgba(0,0,0,0.4);
}

.whatsapp-icon {
  width: 35px;
  height: 35px;
}

/* ------------------- RESPONSIVE ------------------- */
@media (max-width: 1024px){
  .hero h1{font-size:42px;}
  .hero p{font-size:17px;}
}
@media (max-width: 768px){
  header{padding:12px 16px;}
  nav#navbar-links{display:none;}        /* hide desktop nav on mobile */
  .hamburger{display:flex;}              /* show hamburger on mobile */
  .cta-row{flex-direction:column;gap:12px;}
  .hero h1{font-size:36px;}
  .hero p{font-size:16px;}
  .plan-grid{grid-template-columns:1fr;}
  .features-grid{grid-template-columns:1fr;}
  .video-box{height:280px;}
  .nav-right{gap:10px;}
  /* mobile profile menu adjustment */
  .profile-menu{right:10px; top:64px;}
  .navbar-mobile{right:10px; top:64px;}
}
@media (max-width: 480px){
  .hero h1{font-size:28px;}
  .hero p{font-size:14px;}
  .btn{padding:12px 20px;font-size:14px;}
  .info-section{padding:40px 15px;}
}
/* ------------------- HEADER ------------------- */
header{
  position:sticky; top:0; z-index:50;
  background:rgba(11,15,25,0.9);
  backdrop-filter:blur(8px);
  padding:16px 30px;
  display:flex; justify-content:space-between; align-items:center;
  border-bottom:1px solid rgba(255,255,255,0.06);
}
.logo{font-size:22px;font-weight:800;letter-spacing:1px;}
nav a{
  color:#e2e8f0;margin:0 12px;text-decoration:none;font-weight:600;transition:0.25s;
}
nav a:hover{color:var(--accent);}
.nav-right{display:flex;align-items:center;gap:16px;}
.profile-icon{
  width:45px;height:45px;border-radius:10px;
  background:var(--accent);display:flex;align-items:center;
  justify-content:center;font-weight:700;cursor:pointer;
}
.plan-badge{
  border:1px solid var(--accent);
  padding:6px 10px;border-radius:10px;font-size:13px;
  display:none;
}
.nav-btn{
  padding:8px 16px;border-radius:10px;font-weight:700;
  cursor:pointer;text-decoration:none;font-size:14px;
  transition:0.2s;
}
.nav-btn.login{border:1px solid var(--accent);color:var(--accent);background:transparent;}
.nav-btn.login:hover{background:rgba(78,140,255,0.1);}
.nav-btn.signup{background:var(--accent);color:white;}
.nav-btn.signup:hover{transform:scale(1.05);}

/* Hamburger Menu */
.hamburger {
  display: none;
  flex-direction: column;
  cursor: pointer;
  gap: 5px;
  margin-left:10px;
}
.hamburger div {
  width: 25px;
  height: 3px;
  background-color: white;
  transition: all 0.3s ease;
}
.navbar-mobile {
  display: none;
  flex-direction: column;
  gap: 10px;
  position: absolute;
  top: 70px;
  right: 30px;
  background: rgba(11,15,25,0.95);
  padding: 20px;
  border-radius: 12px;
}
.navbar-mobile a {
  color: #e2e8f0;
  font-size: 16px;
}
.navbar-mobile.show {display: flex;}

/* ------------------- RESPONSIVE ------------------- */
@media (max-width: 1024px){
  .hero h1{font-size:42px;}
  .hero p{font-size:17px;}
}
@media (max-width: 768px){
  header{padding:12px 20px;}
  nav{display:none;}
  .hamburger{display:flex; order:1;} /* Hamburger at right side */
  .cta-row{flex-direction:column;gap:12px;}
  .hero h1{font-size:36px;}
  .hero p{font-size:16px;}
  .plan-grid{grid-template-columns:1fr;}
  .features-grid{grid-template-columns:1fr;}
  .video-box{height:280px;}
  .nav-right{gap:10px;}
}
@media (max-width: 480px){
  .hero h1{font-size:28px;}
  .hero p{font-size:14px;}
  .btn{padding:12px 20px;font-size:14px;}
  .info-section{padding:40px 15px;}
}
header{
  position:sticky; top:0; z-index:50;
  background:rgba(11,15,25,0.8);
  backdrop-filter:blur(8px);
  padding:16px 30px;
  display:flex; justify-content:space-between; align-items:center;
  border-bottom:1px solid rgba(255,255,255,0.06);
}
.logo{font-size:22px;font-weight:800;}
nav a{
  color:#e2e8f0;margin:0 12px;text-decoration:none;font-weight:600;
}
nav a:hover{color:var(--accent);}

.nav-right{display:flex;align-items:center;gap:16px;}
.profile-icon{
  width:45px;height:45px;border-radius:10px;
  background:var(--accent);display:flex;align-items:center;
  justify-content:center;font-weight:700;cursor:pointer;
}
.plan-badge{
  border:1px solid var(--accent);
  padding:6px 10px;border-radius:10px;font-size:13px;
  display:none;
}

/* Profile menu */
.profile-menu{
  display:none;position:absolute;right:30px;top:80px;
  background:#151c2f;border-radius:12px;width:260px;
  box-shadow:0 10px 30px rgba(0,0,0,0.4);padding:16px;z-index:200;
}
.profile-menu.visible{display:block;}
.profile-menu .row{margin-bottom:10px;font-size:14px;}
.profile-menu .muted{color:var(--muted);font-size:13px;}
.logout-btn,.switch-btn{
  width:100%;padding:10px;border:none;border-radius:10px;
  margin-top:10px;font-size:15px;font-weight:700;cursor:pointer;
}
.logout-btn{background:#ef4444;color:white;}
.switch-btn{background:#0ea5e9;color:white;}

/* ABOUT CONTENT */
.about-section{
  max-width:1100px;
  margin:120px auto 80px;
  padding:40px 20px;
}
.about-box{
  background:rgba(255,255,255,0.04);
  border:1px solid rgba(255,255,255,0.08);
  border-radius:18px;
  padding:30px;
  margin-bottom:30px;
}
.about-box h2{
  font-size:28px;
  color:var(--accent2);
  margin-bottom:14px;
}
.about-box p{
  color:#e5ecff;
  line-height:1.9;
  font-size:16px;
}
.about-highlight{
  color:#38bdf8;
  font-weight:700;
}
.about-warning{
  background:#1a2336;
  border-left:4px solid #ffb703;
  padding:18px;
  border-radius:10px;
  font-size:14px;
  color:#f1f5f9;
}
.about-contact{
  text-align:center;
  margin-top:40px;
}
.about-contact a{
  display:inline-block;
  background:var(--accent);
  color:white;
  padding:14px 28px;
  border-radius:12px;
  text-decoration:none;
  font-weight:700;
}
.about-contact p{
  margin-top:14px;
  color:var(--muted);
}
</style>
</head>
<body>

<!-- WhatsApp Floating Button -->
<a href="https://wa.me/919877084642" 
   class="whatsapp-float" 
   id="whatsappBtn"
   style="display:none;" 
   target="_blank" rel="noopener">
  <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" 
       class="whatsapp-icon" 
       alt="WhatsApp Chat" />
</a>

<!-- Header with hamburger & mobile menu -->
<header>
  <div class="logo">QuantBotForge</div>

  <!-- Desktop Navigation -->
  <nav id="navbar-links" aria-label="Main navigation"></nav>

  <!-- Hamburger Menu (Mobile) -->
  <div class="hamburger" id="hamburger" aria-label="Open menu" role="button" tabindex="0">
    <div></div>
    <div></div>
    <div></div>
  </div>

  <div class="nav-right">
    <div class="plan-badge" id="planBadge"></div>
    <div id="profileContainer"></div>
  </div>
</header>

<!-- Mobile Dropdown (hidden by default) -->
<div class="navbar-mobile" id="mobileMenu" aria-hidden="true"></div>

<div id="profileMenu" class="profile-menu" aria-hidden="true"></div>
<section class="about-section">

  <div class="about-box">
    <h2>Who We Are</h2>
    <p>
      <span class="about-highlight">QuantBotForge</span> is a specialized algorithmic trading development studio focused on creating
      <strong>custom MT4 & MT5 trading bots</strong> based on real trader strategies.
      We do not sell unrealistic promises â€” we build <strong>real automation for real trading logic</strong>.
    </p>
  </div>

  <div class="about-box">
    <h2>Our Mission</h2>
    <p>
      Our mission is simple:  
      <strong>Convert human trading logic into precise, automated execution</strong> without emotional errors,
      overtrading, or technical mistakes. We exist to help traders scale their discipline â€” not replace their intelligence.
    </p>
  </div>

  <div class="about-box">
    <h2>How We Work</h2>
    <p>
      Every system we build follows a strict professional workflow:
      <br><br>
      âœ… Strategy discussion  
      âœ… Logic validation  
      âœ… Clean MT4/MT5 coding  
      âœ… Backtesting & stress testing  
      âœ… Delivery of final MQ4/MQ5  
      âœ… Ongoing technical support  
    </p>
  </div>

  <div class="about-box">
    <h2>About Our Performance Claims</h2>
    <p>
      Some strategies shown on this website demonstrate historical growth over long backtest periods.
      These are <strong>simulation-based historical results</strong> and are shared
      for educational transparency only â€” not as income guarantees.
    </p>

    <div class="about-warning">
      Trading involves substantial risk. Past performance does not guarantee future results.
      You should trade only with funds you can afford to lose.
    </div>
  </div>

  <div class="about-box">
    <h2>Client Base Transparency</h2>
    <p>
      We are currently in a <strong>focused growth stage</strong>.  
      We intentionally work with a <strong>limited number of traders</strong>
      to maintain full attention, privacy, and quality.
      This allows us to improve faster and serve more responsibly.
    </p>
  </div>

  <div class="about-box">
    <h2>Our Responsibility to You</h2>
    <p>
      We take full responsibility for:
      <br><br>
      âœ… Strategy confidentiality  
      âœ… Clean, non-repaint coding  
      âœ… Transparent communication  
      âœ… After-delivery technical support  
      âœ… Honest limitations disclosure  
    </p>
  </div>

  <div class="about-box">
    <h2>Why Traders Trust QuantBotForge</h2>
    <p>
      Traders trust us not because of marketing â€” but because:
      <br><br>
      âœ” We show real workflow  
      âœ” We share verified logic development  
      âœ” We never hide risk  
      âœ” We never manipulate results  
      âœ” We never promise guaranteed profits  
    </p>
  </div>

  <div class="about-box">
    <h2>Future Vision</h2>
    <p>
      Our long-term vision is to build one of the most transparent
      <strong>trading automation development platforms</strong> globally,
      where trust is earned through proof â€” not advertisements.
    </p>
  </div>

  <div class="about-contact">
    <a href="mailto:mehtabsingh2k18@gmail.com">Contact the Developer Directly</a>
    <p>We personally respond to serious business inquiries within 24 hours.</p>
  </div>

</section>


<!-- Footer -->
<footer style="background: rgba(0,0,0,0.85); color: #fff; padding: 60px 20px; font-family: 'Poppins', sans-serif; line-height: 1.6;">
  <div style="max-width: 1200px; margin: auto; display: flex; flex-wrap: wrap; justify-content: space-between; gap: 40px;">
    <div style="flex:1; min-width: 250px;">
      <h3 style="color: #00d26a; font-size: 22px; margin-bottom: 15px;">QuantBotForge</h3>
      <p>Empowering traders with automation, guidance, and confidential strategies. From beginners to professionals, we provide tools to optimize and grow your trading potential.</p>
      <p style="margin-top: 15px; font-size: 14px; opacity: 0.8;">Â© 2025 QuantBotForge â€” All Rights Reserved</p>
    </div>
    <div style="flex:1; min-width: 200px;">
      <h4 style="color: #00ff80; font-size: 18px; margin-bottom: 15px;">Quick Links</h4>
      <ul style="list-style:none; padding:0; font-size:16px; line-height:2;">
        <li><a href="index.html" style="color:#fff; text-decoration:none;">Home</a></li>
        <li><a href="user-services.html" style="color:#fff; text-decoration:none;">Services</a></li>
        <li><a href="about us.html" style="color:#fff; text-decoration:none;">About Us</a></li>
        <li><a href="contact us.html" style="color:#fff; text-decoration:none;">Contact</a></li>
        <li><a href="prprivacy.html" style="color:#fff; text-decoration:none;">Privacy Policy</a></li>
        <li><a href="terms.html" style="color:#fff; text-decoration:none;">Terms</a></li>
      </ul>
    </div>
  </div>
</footer>

<!-- Fake Chat -->
<div id="fakeChatBtn">ðŸ’¬</div>
<div id="upgradePopup">
  <strong>Upgrade Required</strong><br>Live chat is available for paid users only.
</div>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
// Firebase config
const firebaseConfig={
  apiKey:"AIzaSyD50zshPzc8VOCWxSGLPz7EcawQb8Qreq4",
  authDomain:"quantbotforge.firebaseapp.com",
  databaseURL:"https://quantbotforge-default-rtdb.firebaseio.com",
  projectId:"quantbotforge",
  storageBucket:"quantbotforge.firebasestorage.app",
  messagingSenderId:"792940932432",
  appId:"1:792940932432:web:6eb33f04937fba8a301055"
};
firebase.initializeApp(firebaseConfig);
const auth=firebase.auth();
const db=firebase.database();

// Elements
const navbarLinks=document.getElementById("navbar-links");
const profileContainer=document.getElementById("profileContainer");
const profileMenu=document.getElementById("profileMenu");
const planBadge=document.getElementById("planBadge");
const fakeChatBtn=document.getElementById("fakeChatBtn");
const upgradePopup=document.getElementById("upgradePopup");
const whatsappBtn=document.getElementById("whatsappBtn");
const mobileMenu = document.getElementById("mobileMenu");
const hamburger = document.getElementById("hamburger");

// Utility: set same links for desktop and mobile
function setNavHtml(html){
  navbarLinks.innerHTML = html;
  mobileMenu.innerHTML = html;

  // attach click listeners to mobile links to close menu when clicked
  const mobileAnchors = mobileMenu.querySelectorAll('a');
  mobileAnchors.forEach(a=>{
    a.addEventListener('click', ()=>{
      mobileMenu.classList.remove('show');
      mobileMenu.setAttribute('aria-hidden','true');
    });
  });
}

// Visitor nav
function showVisitorNav(){
  const html = `
    <a href="index.html">Home</a>
    <a href="user-services.html">Services</a>
           <a href="feedback.html"> Feedback</a>

    <a href="about us.html">About Us</a>

    <a href="user-faq.html">Faq</a>
    <a href="contact us.html">Contact Us</a>
    <a href="user-signup.html">Sign Up</a>
    <a href="user-login.html">Login</a>
  `;
  setNavHtml(html);

  profileContainer.innerHTML="";
  planBadge.style.display="none";
  fakeChatBtn.style.display="none";
  whatsappBtn.style.display="none";
  profileMenu.classList.remove('visible');
}

// Logged nav
function showLoggedNav(email, plan){
  const html = `
    <a href="user-home-dashboard.html">Dashboard</a>
    <a href="user-services.html">Services</a>
            <a href="feedback.html"> Feedback</a>

    <a href="user-faq.html">Faq</a>
   
    <a href="about us.html">About Us</a>
     <a href="contact.html">Contact</a>
  `;
  setNavHtml(html);

  const letter = (email && email[0]) ? email[0].toUpperCase() : 'U';
  profileContainer.innerHTML = `<div class="profile-icon" id="profileIcon" aria-label="Profile">${letter}</div>`;

  profileMenu.innerHTML = `
    <div class="row"><strong>Plan:</strong><div class="muted">${plan}</div></div>
    <div class="row"><strong>Email:</strong><div class="muted">${email}</div></div>
    <button class="switch-btn" id="switchBtn">Switch Account</button>
    <button class="logout-btn" id="logoutBtn">Logout</button>
  `;

  // safe attach - logout
  const logoutBtn = document.getElementById("logoutBtn");
  if(logoutBtn) logoutBtn.onclick = ()=> auth.signOut().then(()=> location.href="index.html");

  const switchBtn = document.getElementById("switchBtn");
  if(switchBtn) switchBtn.onclick = ()=> location.href='user-login.html';

  // profile icon click -> toggle menu
  const profileIcon = document.getElementById("profileIcon");
  if(profileIcon){
    profileIcon.onclick = (e)=>{
      e.stopPropagation();
      profileMenu.classList.toggle("visible");
    };
  }
}

// Tawk chat loader
let tawkLoaded=false;
function loadTawk(){
  if(tawkLoaded) return;
  tawkLoaded=true;
  var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
  s1.async=true;
  s1.src="https://embed.tawk.to/6921b672a45b0c1967397786/1jalr1c4n";
  s1.charset="UTF-8";
  s1.setAttribute("crossorigin","*");
  s0.parentNode.insertBefore(s1,s0);
}

// Free 72-hour trial activation
function activateFreePlan(){
  auth.onAuthStateChanged(user=>{
    if(!user){
      alert("Please login to activate your free trial.");
      location.href="login.html";
      return;
    }
    const now = Date.now();
    const expire = now + (72 * 60 * 60 * 1000);
    db.ref("users/"+user.uid).update({
      plan: "free_72hr",
      free_start: now,
      free_expire: expire,
      chatEnabled: true
    }).then(()=>{
      alert("Your Free 72-Hour Trial is Activated!");
      location.reload();
    });
  });
}

// Auth + plan check + Tawk + WhatsApp
auth.onAuthStateChanged(user=>{
  if(!user){
    showVisitorNav();
    return;
  }

  const ref=db.ref("users/"+user.uid);
  ref.once("value").then(snapshot=>{
    const data=snapshot.val()||{};
    let planCode=data.plan||"none";
    const now=Date.now();

    // Free plan active?
    let freeActive=false;
    if(planCode==="free_72hr" && now<=data.free_expire) freeActive=true;
    if(planCode==="free_72hr" && now>data.free_expire) db.ref("users/"+user.uid).update({chatEnabled:false, plan:"expired"});

    const isPaid = typeof planCode === 'string' && planCode.startsWith && planCode.startsWith("ppanttt:");
    const chatEnabled = isPaid || freeActive;

    // Display WhatsApp whenever Tawk/chat is enabled
    if(chatEnabled){
      loadTawk();
      whatsappBtn.style.display="flex";
      fakeChatBtn.style.display="none";
    } else {
      whatsappBtn.style.display="none";
      fakeChatBtn.style.display="flex";
      fakeChatBtn.onclick=()=>{upgradePopup.style.display="block"; setTimeout(()=>upgradePopup.style.display="none",3000);}
    }

    // Plan badge display
    let readablePlan="No Active Plan";
    if(planCode==="free_72hr") readablePlan=freeActive ? "Free Trial Active":"Expired";
    if(typeof planCode === 'string' && planCode.startsWith && planCode.startsWith("ppanttt:")) readablePlan="Plan Activated";
    if(planCode==="expired") readablePlan="Expired";
    planBadge.innerText=readablePlan;
    planBadge.style.display="inline-block";

    showLoggedNav(user.email, readablePlan);
  });
});

// ----------------- MOBILE / HAMBURGER BEHAVIOR -----------------
if(hamburger){
  hamburger.addEventListener('click', (e)=>{
    e.stopPropagation();
    mobileMenu.classList.toggle('show');
    const isShown = mobileMenu.classList.contains('show');
    mobileMenu.setAttribute('aria-hidden', !isShown);
  });

  // allow keyboard toggle
  hamburger.addEventListener('keydown', (e)=>{
    if(e.key === 'Enter' || e.key === ' '){
      e.preventDefault();
      hamburger.click();
    }
  });
}

// close mobile menu when clicking outside
document.addEventListener('click', (e)=>{
  const target = e.target;
  if(!mobileMenu.contains(target) && !hamburger.contains(target)){
    if(mobileMenu.classList.contains('show')){
      mobileMenu.classList.remove('show');
      mobileMenu.setAttribute('aria-hidden','true');
    }
  }
  // also close profile menu on outside click
  if(!profileMenu.contains(target) && !profileContainer.contains(target)){
    if(profileMenu.classList.contains('visible')){
      profileMenu.classList.remove('visible');
    }
  }
});

// close menus on escape key
document.addEventListener('keydown', (e)=>{
  if(e.key === 'Escape'){
    if(mobileMenu.classList.contains('show')){
      mobileMenu.classList.remove('show');
      mobileMenu.setAttribute('aria-hidden','true');
    }
    if(profileMenu.classList.contains('visible')){
      profileMenu.classList.remove('visible');
    }
  }
});

// keep nav updated if DOM changes (e.g., after login)
const observer = new MutationObserver(()=> {
  // rebind profile icon if present
  const profileIcon = document.getElementById("profileIcon");
  if(profileIcon){
    profileIcon.onclick = (ev)=>{
      ev.stopPropagation();
      profileMenu.classList.toggle("visible");
    };
  }
});
observer.observe(document.body, { childList: true, subtree: true });

// on load - initialize visitor nav so menus exist before auth check finishes
document.addEventListener('DOMContentLoaded', ()=>{
  showVisitorNav();
});
// Fade-in animation for premium content blocks
document.addEventListener("DOMContentLoaded", () => {
  const fadeBlocks = document.querySelectorAll(".fade-block");

  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add("fade-visible");
        }
      });
    },
    {
      threshold: 0.15
    }
  );

  fadeBlocks.forEach((block) => observer.observe(block));
});
</script>
</body>
</html>
